<!DOCTYPE html>
<html>
	<head>
		<title>Ollama Chatbot</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				margin: 20px;
			}
			#chat {
				border: 1px solid #ccc;
				height: 400px;
				overflow-y: auto;
				padding: 10px;
			}
			#input {
				margin-top: 10px;
			}
		</style>
	</head>
	<body>
		<h2>Chatbot (Ollama)</h2>
		<div id="chat"></div>
		<div id="input">
			<input
				type="text"
				id="prompt"
				style="width: 80%"
				placeholder="Type a message..." />
			<button onclick="send()">Send</button>
		</div>
		<script>
			function addMessage(sender, text) {
				const chat = document.getElementById("chat");
				const div = document.createElement("div");
				div.innerHTML = `<b>${sender}:</b> ${text}`;
				chat.appendChild(div);
				chat.scrollTop = chat.scrollHeight;
			}

			async function send() {
				const promptInput = document.getElementById("prompt");
				const prompt = promptInput.value.trim();
				if (!prompt) return;

				addMessage("You", prompt);
				promptInput.value = "";

				const res = await fetch("/send", {
					method: "POST",
					headers: { "Content-Type": "application/json" },
					body: JSON.stringify({ prompt }),
				});

				const data = await res.json();
				addMessage("Bot", data.response || JSON.stringify(data));
			}
		</script>
	</body>
</html>
